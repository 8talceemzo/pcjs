(function(){/*
 https://www.pcjs.org/machines/lib/defs.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/numio.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/stdio.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/webio.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/device.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/input.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/led.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/monitor.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/time.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/bus.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/memory.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/ram.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/rom.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/cpu.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/debugger.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/pcx86/libv3/cpux86.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/pcx86/libv3/video.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/machines/lib/machine.js (C) 2012-2020 Jeff Parsons
*/
var n;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function u(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:aa(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca;
if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={Oa:!0},fa={};try{fa.__proto__=ea;da=fa.Oa;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;
function v(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]}var ia="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function ja(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}return globalThis}var y=ja(this);function A(a,b){if(b){var c=y;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ia(c,a,{configurable:!0,writable:!0,value:b})}}
A("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});A("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});function ka(){ka=function(){};y.Symbol||(y.Symbol=la)}function ma(a,b){this.o=a;ia(this,"description",{configurable:!0,writable:!0,value:b})}ma.prototype.toString=function(){return this.o};
var la=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ma("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();function na(){ka();var a=y.Symbol.iterator;a||(a=y.Symbol.iterator=y.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ia(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return oa(aa(this))}});na=function(){}}function oa(a){na();a={next:a};a[y.Symbol.iterator]=function(){return this};return a}
function pa(a,b){na();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}A("Array.prototype.keys",function(a){return a?a:function(){return pa(this,function(b){return b})}});
A("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});A("Number.parseInt",function(a){return a||parseInt});A("Array.prototype.values",function(a){return a?a:function(){return pa(this,function(b,c){return c})}});var qa=new ArrayBuffer(2);(new DataView(qa)).setUint16(0,256,!0);new Uint16Array(qa);function ra(){}var B={};B.Defs=ra;
function sa(){}v(sa,ra);function ta(a,b){var c=a/C|0,d=b/C|0;return(a&b)==(b|0)&&(c&d)==d}function ua(a){for(var b=0,c=0,d=[];b<a.length;){for(var e=a[b],g=b+1;g<a.length&&a[g]===e;)g++;d[c++]=g-b;d[c++]=e;b=g}return d.length>=a.length?a:d}var C=Math.pow(2,32);B.NumIO=sa;function D(){this.Ha={};for(var a=0;22>a;a++)this.Ha["ACDFHIMNSTWYbdfjcsoXx%"[a]]=null}v(D,sa);n=D.prototype;n.flush=function(){var a=va;va="";this.oa(a)};
function wa(a){var b=a,c=a.lastIndexOf("/");0<=c&&(b=a.substr(c+1));c=b.indexOf("&");0<c&&(b=b.substr(0,c));c=b.lastIndexOf(".");0<c&&(b=b.substring(0,c));return b}n.sc=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return void 0===b[0]?new Date(Date.now()):"string"===typeof b[0]?new Date(b[0]+" "+(b[1]||"00:00:00 GMT")):void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,u(b)))};
n.oa=function(a,b){var c=a.lastIndexOf("\n");b?0<=c&&(b=Date.now(),xa||(xa=b),a=((b-xa)/1E3).toFixed(3)+": "+a):(0<=c&&(console.log(va+a.substr(0,c)),va="",a=a.substr(c+1)),xa=null);va+=a;return a.length};function E(a,b,c){a.oa(b+"\n",c)}n.m=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return this.oa(this.R.apply(this,[a].concat(u(c))))};
n.R=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!c||!c.length)return a;d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),g=0,f;for(f=0;f<e.length-6;f+=6){d+=e[f];var m=e[f+5];if(void 0===this.Ha[m])d+="%"+e[f+1]+e[f+2]+e[f+3]+e[f+4]+m;else{if(g<c.length){var h=c[g];"%"!=m&&g++}else h=c[c.length-1];var q=e[f+1],k=0<=q.indexOf("#"),p=0<=q.indexOf("0"),l=e[f+2];"*"==l?(l=h,h=g<c.length?c[g++]:c[c.length-1]):l=+l||0;var r=e[f+3];r=r?+r.substr(1):
-1;var w=null,x=0,z="";var t=0<="ACDFHIMNSTWY".indexOf(m)&&"object"!=typeof h?this.sc(h):h;switch(m){case "C":h=k?"#":"";d+=isNaN(t.getTime())?void 0:this.R(this.R("%%%sW, %%%sF %%%sD, %%%sY",h),t);continue;case "D":h=k?t.getUTCDate():t.getDate();m="d";break;case "A":case "H":case "I":h=k?t.getUTCHours():t.getHours();"A"==m?(h=12>h?"am":"pm",m="s"):("I"==m&&(h=h?12<h?h-12:h:12),m="d");break;case "F":case "M":h=k?t.getUTCMonth():t.getMonth();"F"==m?(h=ya[h],m="s"):(h++,m="d");break;case "N":h=k?t.getUTCMinutes():
t.getMinutes();m="d";break;case "S":h=k?t.getUTCSeconds():t.getSeconds();m="d";break;case "T":h=k?"#":"";d+=isNaN(t.getTime())?void 0:this.R(this.R("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",h),t);continue;case "W":h=za[k?t.getUTCDay():t.getDay()];m="s";break;case "Y":h=k?t.getUTCFullYear():t.getFullYear(),0<r&&(h%=Math.pow(10,r),r=-1),m="d"}switch(m){case "b":d+=h?"true":"false";break;case "d":h=Math.trunc(h),0<=r&&(p=!0,l<r&&(l=r),r=-1);case "f":h=+h;t=h+"";0<=r&&(t=h.toFixed(r));t.length<
l&&(p?(0>h&&(l--,t=t.substr(1)),t=("0000000000"+t).slice(-l),0>h&&(t="-"+t)):t=("          "+t).slice(-l));d+=t;break;case "j":d+=JSON.stringify(h,null,l||void 0);break;case "c":h="string"==typeof h?h[0]:String.fromCharCode(h);case "s":if(void 0!=h)for("string"!=typeof h&&(h=h.toString()),0<=r&&(h=h.substr(0,r));h.length<l;)h=0<=q.indexOf("-")?h+" ":" "+h;d+=h;break;case "o":x=8,k&&(z="0");case "X":w=Aa;case "x":t="";x||(x=16);!z&&k&&(z="0x");w||(w=Ba);h=Math.trunc(h);0<=r&&(p=!0,l<r&&(l=r));p&&!l&&
(l=Math.abs(h),l=255>=l?2:65535>=l?4:4294967295>=l?8:9,l+=z.length);l-=z.length;do k=h&x-1,h>>>=16==x?4:3,p||!t||k||h?t=w[k]+t:(z&&(t=z+t,z=""),0<l&&(t=" "+t));while(0<--l||h);d+=z+t;break;case "%":d+="%";break;default:this.Ha[m]?d+=this.Ha[m](m,q,l,r,h):d+="(unimplemented sprintf type: %"+m+")"}}}return d+=e[f]};var va="",xa=null,Ba="0123456789abcdef",Aa="0123456789ABCDEF",za="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ya="January February March April May June July August September October November December".split(" ");
B.StdIO=D;function F(a){D.call(this);this.w={};this.W=0;this.o=this;a&&(this.o.W=0,this.o.da=[],this.o.Z=0,this.o.Zb={},this.o.sa=!1)}var Ca;v(F,D);n=F.prototype;n.ea=function(a,b){var c=this,d=this;switch(a){case Da.Gb:b.onclick=function(){var e=c.fa(Da.La,!0);e&&(e.value="")};break;case Da.La:Ea(b),b.addEventListener("keydown",function(e){Fa(d,e,!0)}),b.addEventListener("keypress",function(e){Fa(d,e)})}};
function Ea(a){a.setAttribute("autocapitalize","off");a.setAttribute("autocomplete","off");a.setAttribute("autocorrect","off");a.setAttribute("spellcheck","false");a.value=""}n.error=function(a,b){b=this.R.apply(this,[a].concat(u(b)));var c="%s";a=!1;"boolean"==typeof c&&(a=c,c=b.shift());if(b=this.R.apply(this,[c].concat(u(b))))E(this,b),a||alert(b)};n.fa=function(a){return this.w[a]};
function G(a,b,c){if(a){do{for(var d=0;d<Ga.length;d++){var e=Ga[d];if(c){if(e+=c,b+e in a)return e}else if(e=e?e+b[0].toUpperCase():b[0],e+=b.substr(1),e in a)return e}if(0>b.indexOf("screen"))break;b=b.replace("screen","Screen")}while(1)}return null}function Ha(a,b){return a.g.bindings&&a.g.bindings[b]}function Ia(a){if(a=a.w[Ja])var b=a.textContent;return b}function Ka(a,b,c){a=+a||0;a<b&&(a=b);a>c&&(a=c);return a}
function H(a,b,c,d){a=a.g[b];void 0===a?a=c:(d&&void 0!==d[a]&&(a=d[a]),d=typeof c,typeof a!=d&&("boolean"==d?a=!!a:"number"==typeof c&&(a=+a)));return a}
function La(a,b){var c=0,d=null,e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){4===e.readyState&&(d=e.responseText,200==e.status||!e.status&&d.length&&"file:"==(window?window.location.protocol:"file:")||(c=e.status||-1));b(a,d,e.readyState,c)};e.open("GET",a,!0);e.send()}
function Ma(){var a,b=Ca;if(!b){b={};if(window){a||(a=window.location.search.substr(1));for(var c,d=/\+/g,e=/([^&=]+)=?([^&]*)/g;c=e.exec(a);)b[decodeURIComponent(c[1].replace(d," ")).trim()]=decodeURIComponent(c[2].replace(d," ")).trim()}Ca=b}return b}function Na(a){if(void 0===I.Ja){var b=!1;if(window)try{window.localStorage.setItem(I.pa,I.pa),b=window.localStorage.getItem(I.pa)==I.pa,window.localStorage.removeItem(I.pa)}catch(c){E(a,c.message),b=!1}I.Ja=b}return!!I.Ja}
function J(a,b){b=void 0===b?0:b;1<b&&b%2&&b--;b=b||a.W;return-1==(b|1)||ta(a.o.W,b)?!0:!1}function K(a){if(window){var b=window.navigator.userAgent;return"iOS"==a&&(!!b.match(/(iPod|iPhone|iPad)/)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function Oa(a){var b=null;if(Na(a)){var c;if(window)try{(c=window.localStorage.getItem(a.u))&&(b=JSON.parse(c))}catch(d){E(a,d.message)}}return b}
function Fa(a,b,c){b=b||window.event;var d=b.which||b.keyCode;if(d){var e=a.o,g=b.target;if(c){a=!1;var f;c=g.value;var m=c.lastIndexOf("\n");d==L.Qa&&g.selectionStart<=m+1&&(a=!0);d==L.lc?(a=!0,0<e.Z&&(f=e.da[--e.Z])):d==L.Lb&&(a=!0,e.Z<e.da.length&&(f=e.da[++e.Z]||""));a&&b.preventDefault();void 0!=f&&(g.value=c.substr(0,m+1)+f)}else d=String.fromCharCode(d),f=g.value,c=f.lastIndexOf("\n"),g.selectionStart<=c&&g.setSelectionRange(f.length,f.length),b.stopPropagation(),"@"==d&&0<e.Z&&c+1==f.length&&
(g.value+=e.da[--e.Z],d="\r"),"\r"==d&&(b.preventDefault(),f=g.value+="\n",g.blur(),g.focus(),(b=Pa(a,f.slice(f.lastIndexOf("\n",f.length-2)+1,-1)||""))&&E(a,b.replace(/\n$/,""),!1))}}function Qa(a){if(window){var b=window.onresize;window.onresize="function"!==typeof b?a:function(){b&&b();a()}}}
function Ra(a,b){if(void 0!=b){var c=a.o;try{if(b=b.trim())c.Z<c.da.length&&b==c.da[c.Z]?c.Z++:(c.da.push(b),c.Z=c.da.length);var d=b.split(" "),e=d[0],g=a.o.Zb[Sa.Hb];switch(e[0]){case "m":if("?"==e[1]){var f="";Ta.forEach(function(p){f+=p+"\n"});f&&(f="message commands:\n"+f);break}f="";var m=void 0;e=d[d.length-1].toLowerCase();var h="true"==e||"on"==e?!0:"false"==e||"off"==e?!1:void 0;void 0!=h&&d.pop();1>=d.length&&(void 0!=h&&(m=h,h=void 0),d[1]="all");"all"==d[1]&&(d=Object.keys(M));for(g=
1;g<d.length;g++){e=d[g];var q=M[e];if(!q){f+="unrecognized message: "+e+"\n";break}void 0!=h&&Ua(a,q,h);if(void 0==m||m==J(a,q))f+=a.R("%8s: %b\n",e,J(a,q))}J(a,0x800000000000)&&(f+="all messages will be buffered until buffer is turned off\n");f||(f="no messages\n");break;case "?":f="",Va.forEach(function(p){f+=p+"\n"}),f&&(f="default commands:\n"+f);default:if(d.unshift(b),g)for(a=0;a<g.length;a++){var k=g[a](d);if(void 0!=k){f=f?f+k:k;break}}}}catch(p){f="error: "+p.message+"\n"}}return f}
function Pa(a,b){b=void 0===b?"?":b;if(b){var c="";b=b.split(/(?:\n|;\s*)/);for(var d=0;d<b.length;d++)c+=Ra(a,b[d])}return c}n.oa=function(a,b){void 0==b&&(b=J(this,0x800000000000));if(!b){var c=this.fa(Da.La,!0);if(c)return c.value.substr(-a.length)!=a&&(c.value+=a,8192<c.value.length&&(c.value=c.value.substr(c.value.length-4096)),c.scrollTop=c.scrollHeight,K("iOS")||c.setSelectionRange(c.value.length,c.value.length)),a.length}return D.prototype.oa.call(this,a,b)};
n.m=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d=0;"number"==typeof a&&(d=a,a=c.shift());return J(this,d)?D.prototype.m.call.apply(D.prototype.m,[this,a].concat(u(c))):0};function Wa(a,b){if(Na(a)){b=JSON.stringify(b);try{window.localStorage.setItem(a.u,b)}catch(c){E(a,c.message)}}}function Xa(a,b,c){(a=a.w[b])&&a.textContent!=c&&(a.textContent=c)}
function Ua(a,b,c){var d=!1;c?(c=a.o.W,a.o.W=(c|b)+(c/C|0|b/C|0)*C):(d=ta(a.o.W,0x800000000000)&&ta(b,0x800000000000),c=a.o.W,a.o.W=(c&~b)+((c/C|0)&~(b/C|0))*C);d&&a.flush()}
var Da={Gb:"clear",La:"print"},Va=["\u2191 \u2193\t\trecall commands","@\t\trepeat last command","m?\t\tmessage commands"],Ta=["m\t\tdisplay all messages","m on\t\tdisplay all active messages","m off\t\tdisplay all inactive messages","m all [on|off]\tturn all messages on or off","m ... [on|off]\tturn selected messages on or off"],M={all:0xffffffffffff,buffer:0x800000000000},Sa={Hb:"command"},Ya={Ta:13,Ia:65,Pa:66,Ra:67,Ua:68,E:69,Va:70,Xa:71,Ya:72,Za:73,ab:74,bb:75,cb:76,fb:77,ib:78,jb:79,kb:80,Q:81,
lb:82,nb:83,pb:84,qb:85,rb:86,sb:87,tb:88,ub:89,Na:90,Oa:97,Pd:98,Qd:99,d:100,e:101,Ud:102,Vd:103,Xd:104,Yd:105,Zd:106,k:107,$d:108,ae:109,n:110,be:111,p:112,q:113,r:114,ce:115,t:116,ee:117,fe:118,ge:119,x:120,y:121,z:122},L={Qa:8,ic:9,Ub:10,Ta:13,fc:16,Jb:17,Fb:18,Dd:19,Ka:20,Ec:27,hc:32,Gd:33,Fd:34,Dc:35,Zc:36,eb:37,lc:38,Ma:39,Wc:39,Lb:40,Tc:44,Hd:44,$c:45,Cc:46,Vc:46,Yc:47,ZERO:48,ONE:49,kc:50,jc:51,Tb:52,Sb:53,gc:54,ec:55,Mb:56,Vb:57,Rb:59,Qb:61,Ia:65,Pa:66,Ra:67,Ua:68,E:69,Va:70,Xa:71,Ya:72,
Za:73,ab:74,bb:75,cb:76,fb:77,ib:78,jb:79,kb:80,Q:81,lb:82,nb:83,pb:84,qb:85,rb:86,sb:87,tb:88,ub:89,Na:90,Sa:91,Uc:91,Sc:92,Kd:93,Xc:93,dd:96,vd:96,Rc:96,ed:97,td:97,fd:98,sd:98,gd:99,yd:99,hd:100,wd:100,jd:101,pd:101,kd:102,Ad:102,ld:103,ud:103,md:104,Cd:104,nd:105,zd:105,xd:106,od:107,Bd:109,qd:110,rd:111,Fc:112,Jc:113,Kc:114,Lc:115,Mc:116,Nc:117,Oc:118,Pc:119,Qc:120,Gc:121,Hc:122,Ic:123,Wb:144,cc:145,Pb:173,dc:186,Nb:187,Bc:188,Kb:189,Ed:190,Md:191,zc:192,ad:219,Ac:220,Jd:221,Id:222,Ob:224,bd:901,
Nd:1E3},Za={},$a=(Za[L.Rb]=L.dc,Za[L.Qb]=L.Nb,Za[L.Pb]=L.Kb,Za[L.Ob]=L.Sa,Za),ab={eb:1,Ma:2,cd:3},N={},bb=(N[L.Qa]="\b",N[L.ic]="\t",N[L.Ub]="\n",N[L.Ta]="\r",N[L.hc]=" ",N[L.ZERO]="0",N[L.ONE]="1",N[L.kc]="2",N[L.jc]="3",N[L.Tb]="4",N[L.Sb]="5",N[L.gc]="6",N[L.ec]="7",N[L.Mb]="8",N[L.Vb]="9",N[L.Ia]="A",N[L.Pa]="B",N[L.Ra]="C",N[L.Ua]="D",N[L.E]="E",N[L.Va]="F",N[L.Xa]="G",N[L.Ya]="H",N[L.Za]="I",N[L.ab]="J",N[L.bb]="K",N[L.cb]="L",N[L.fb]="M",N[L.ib]="N",N[L.jb]="O",N[L.kb]="P",N[L.Q]="Q",N[L.lb]=
"R",N[L.nb]="S",N[L.pb]="T",N[L.qb]="U",N[L.rb]="V",N[L.sb]="W",N[L.tb]="X",N[L.ub]="Y",N[L.Na]="Z",N[L.eb]="Left",N[L.Ma]="Right",N),Ga=["","moz","ms","webkit"],cb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",
cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",
floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",
lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",
mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",
sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},I={Ja:void 0,pa:"PCjs.localStorage"};B.WebIO=F;
function O(a,b,c,d){F.call(this,a==b);this.u=a;this.I=b;P[this.u]||(P[this.u]={});P[this.u][this.I]&&this.m("warning: machine configuration contains multiple '%s' devices\n",this.I);P[this.u][this.I]=this;this.id=this.u+"."+this.I;db.push(this);this.o=eb(this,this.u);this.ready=!0;fb(this,c,d);this.$a=[]}v(O,F);
function fb(a,b,c){b=void 0===b?{}:b;c=void 0===c?[]:c;c=b.overrides||c;if(c.length){var d=Ma();for(r in d)if(0<=c.indexOf(r)){var e=d[r];var g=void 0;var f,m=void 0,h=e,q=10;if(h){q||(q=10);var k=0<h.indexOf(",");k&&(h=h.replace(/,/g,""));var p=f=h.charAt(0);"#"==f?(q=8,f=""):"$"==f&&(q=16,f="");p!=f?h=h.substr(1):(p=f=h.substr(0,2),"0b"==f&&k||"^B"==f?(q=2,f=""):"0o"==f||"^O"==f?(q=8,f=""):"^D"==f?(q=10,f=""):"0x"==f&&(q=16,f=""),p!=f&&(h=h.substr(2)));p=f=h.slice(-1);"Y"==f||"y"==f?(q=2,f=""):
"."==f?(q=10,f=""):"H"==f||"h"==f?(q=16,f=""):"K"==f?f="000":"M"==f?f="000000":"G"==f&&(f="000000000");p!=f&&(h=h.slice(0,-1)+f);p=0;10>=q&&(f=h.match(/(-?[0-9]+)B([0-9]*)$/))&&(h=f[1],p=35-((f[2]||35)&255));(q&&10!=q?16==q?null===h.match(/^-?[0-9a-f]+$/i):8==q?null===h.match(/^-?[0-7]+$/):2!=q||null===h.match(/^-?[01]+$/):null===h.match(/^[+-]?[0-9]+$/))||isNaN(g=parseInt(h,q))||(p&&(0>g&&(g+=Math.pow(2,36)),g=0<p?g*Math.pow(2,p):Math.trunc(g/Math.pow(2,-p))),m=g)}g=m;void 0==g&&("true"==e?g=!0:
"false"==e?g=!1:(g=e,e='"'+e+'"'));b[r]=g;E(a,"overriding "+a.I+" property '"+r+"' with "+e)}}a.g=b;c=b.bindings;c=void 0===c?{}:c;a.g.w||(a.g.w=c);(d=Array.isArray(c))?0>c.indexOf("container")&&c.push("container"):c.container||(c.container=a.I);for(var l in c){e=c[l];if(d)l=e;else if(e.match(/^[0-9]+$/)){var r=+e;a.w[l]=[];do{e=l+r++;e=document.getElementById(e);if(!e)break;a.w[l].push(e)}while(1);continue}if(r=document.getElementById(e))a.w[l]=r,a.ea(l,r)}b=void 0===b?{}:b;a.version=3;if(a.version){l=
"";var w;a.u!=a.I&&(w=eb(a,a.u).version)&&w!=a.version&&(l="Machine");l||(w=b.version)&&w>a.version&&(l="Config");l&&(w=a.R("%s Device version (%3.2f) incompatible with %s version (%3.2f)",b.Rd,a.version,l,w),a.error("%s\n\nClearing your browser's cache may resolve the issue.",w))}}function gb(a,b){var c;try{var d=P[a.u];if(d)for(c in d){var e=d[c];if(e.I!=e.u&&!b(e))return!1}return!0}catch(g){a.m("error while enumerating device '%s': %s\n",c,g.message)}return!1}
O.prototype.fa=function(a,b){b=void 0===b?!1:b;if(a){var c=F.prototype.fa.call(this,a,b);if(void 0===c&&b){b=P[this.u];for(var d in b)if(c=b[d].w[a])break;c||(c=null);this.w[a]=c}}return c};function eb(a,b){var c=b,d=a.u,e=d.indexOf(".");0<e&&(d=d.substr(0,e),b=b.substr(e+1));b=(e=P[d])&&e[b]||null;if(!b){for(e=0;e<db.length;e++)if(db[e].id===c){b=db[e];break}if(!b)throw Error(a.R('no "%s" device',c));}return b}
function Q(a,b,c){var d=null,e=P[a.u];if(e)for(var g in e)if(e[g].g["class"]==b){if(d){d=null;break}d=e[g]}if(!d&&(void 0===c||c))throw Error(a.R("no %s device",b));return d}function R(a){return a==a.o&&a.ready?gb(a,function(b){return R(b)}):a.ready}function hb(a,b){b=void 0===b?a.ready:b;a.ready=b;if(R(a)){for(;b=a.$a.pop();)b();a!=a.o&&hb(a.o)}}function ib(a,b){if(R(a))return b(),!0;a.$a.push(b);return!1}
O.prototype.m=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return"number"==typeof a&&J(this,a)&&(void 0===this.ba&&(this.ba=Q(this,"Debugger",!1)),this.o.W&jb&&(void 0===this.aa&&(this.aa=Q(this,"CPU")),this.aa))?(a=c.shift(),F.prototype.m.call(this,"%#06x: %s.%s\n",this.aa.tc,this.I,this.R.apply(this,[a].concat(u(c))).trim())):F.prototype.m.call.apply(F.prototype.m,[this,a].concat(u(c)))};function kb(a,b){(a=P[a.u])&&delete a[b]}
window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]));var P=window?window.PCjs.Machines:{},db=window?window.PCjs.Components:[],jb=1;M.addr=jb;M.bus=2;M.fault=4;M.memory=8;M.ports=16;M.chips=32;M.kbd=64;M.serial=128;M.misc=256;M.cpu=512;M.mmu=1024;M["int"]=2048;M.trap=4096;M.video=8192;M.monitor=16384;M.screen=32768;M.time=65536;M.timer=131072;M.event=262144;M.input=524288;M.key=1048576;M.mouse=2097152;M.touch=4194304;
M.warn=8388608;M.halt=16777216;B.Device=O;
function lb(a,b,c){O.call(this,a,b,c);this.W=524288;this.O=this.J=null;this.time=Q(this,"Time");this.o=Q(this,"Machine");this.V=H(this,"drag",!1);this.N=H(this,"scroll",!1);this.U=H(this,"hexagonal",!1);this.h=H(this,"releaseDelay",0,void 0);this.i=!1;a=this.g.map;this.b=this.f=null;if(a)if(a.length)this.b=a;else{this.f={};b=Object.keys(a);for(var d=0;d<b.length;d++){var e=[],g=b[d],f=a[g];"string"==typeof f?f=[f]:void 0==f.length&&(e=f.grid,f=f.keys,"string"==typeof f&&(f=[f]));this.f[g]={keys:f,
Wd:e,state:0}}}this.K=[];this.L=[];this.l=!1;this.c=this.s=null;(a=this.w[mb])&&nb(this,a,this.fa(c.focusBinding,!0),this.g.location);this.$()}v(lb,O);function ob(a,b){a.J=b}function pb(a,b,c){for(var d=0;d<a.K.length;d++){var e=a.K[d];e.id===b&&e.yb(b,c)}}
function nb(a,b,c,d){d=void 0===d?[]:d;if(d.length||a.b||a.f){var e={};e.xc=d[0]||0;e.yc=d[1]||0;e.qa=d[2]||b.clientWidth;e.Aa=d[3]||b.clientHeight;e.Ca=d[4]||1;e.Fa=d[5]||1;e.pc=d[6]||b.naturalWidth||e.qa;e.rc=d[7]||b.naturalHeight||e.Aa;e.Db=d[8]||0;e.Eb=d[9]||0;e.oc=d[10]||0;e.qc=d[11]||0;a.b?(e.Ea=a.b.length,e.ra=a.b[0].length):(e.ra=e.Ca,e.Ea=e.Fa,e.Ca=e.Fa=0);e.vb=e.qa/(e.ra+e.ra*e.Ca)|0;e.wb=e.Aa/(e.Ea+e.Ea*e.Fa)|0;e.nc=e.vb*e.Ca|0;e.xb=e.wb*e.Fa|0;e.ua=e.Ga=-1;qb(a,b,e);rb(a,b,e);a.time&&
a.h&&(a.T=sb(a.time,"timerInputRelease",function(){0>e.ua&&0>e.Ga&&tb(a,-1,-1)}))}if(a.b||a.f)a.time&&a.h&&(a.ca=sb(a.time,"timerKeyRelease",function(){ub(a)})),a.j=0,a.H="",a.v=[],d=b,c&&(d=c,a.c||"BUTTON"!=c.nodeName||(d=document,a.c=c,vb(a,b),a.s=b)),vb(a,d),a.c||(a.c=d)}function wb(a){a.h?S(a.time,a.ca,a.h):ub(a)}
function vb(a,b){function c(e,g,f){var m=document.activeElement;a.m(1310720,"%s.onKey%s(%d): %5.2f (%s)\n",m.id||m.nodeName,e,g,Date.now()/1E3%60,void 0!=f?f?"used":"unused":"ignored")}function d(e,g){e=document.activeElement;return a.c&&e!=a.c&&e!=a.s?null:g||window.event}b.addEventListener("keydown",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=xb(a,g,!0,e);c("Down",g,f);f&&e.preventDefault()}});b.addEventListener("keypress",function(e){if(e=d(this,e)){var g=e.which||e.charCode,f=xb(a,
g);c("Press",g,f);f&&e.preventDefault()}});b.addEventListener("keyup",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=xb(a,g,!1,e);c("Up",g);f&&e.preventDefault();"TEXTAREA"==b.nodeName&&(b.value="")}})}
function qb(a,b,c){b.addEventListener("mousedown",function(d){if(!a.i){var e=a.l?a.s:a.c;if(e){var g=window.scrollX,f=window.scrollY;e.focus();window.scrollTo(g,f)}d.button||T(a,b,yb,d,c)}});b.addEventListener("mousemove",function(d){a.i||T(a,b,zb,d,c)});b.addEventListener("mouseup",function(d){a.i||d.button||T(a,b,U,d,c)});b.addEventListener("mouseout",function(d){a.i||(0>c.ua?T(a,b,zb,d,c):T(a,b,U,d,c))})}
function rb(a,b,c){b.addEventListener("touchstart",function(d){a.N&&(a.i=!0);T(a,b,yb,d,c)});b.addEventListener("touchmove",function(d){T(a,b,zb,d,c)});b.addEventListener("touchend",function(d){T(a,b,U,d,c)})}
function xb(a,b,c,d){if(void 0!=c){var e=$a[b]||b;var g=bb[b];var f=Ab[e];d=d&&d.location==ab.Ma;f&Bb&&d&&(f>>=1);f&&(f&Cb&&(c=!(a.a&f)),a.a=c?a.a|f:a.a&~f,pb(a,e,c))}else g=String.fromCharCode(b).toUpperCase(),b>=Ya.Ia&&b<=Ya.Na?a.a&(Db|Eb)||(a.a|=Eb,pb(a,L.Ka,!0)):b>=Ya.Oa&&b<=Ya.z&&a.a&Eb&&(a.a&=~Eb,pb(a,L.Ka,!1));if(a.b){if(void 0!=c)return!1;for(e=0;e<a.b.length;e++)for(f=a.b[e],d=0;d<f.length;d++)if(0<=f[d].split("|").indexOf(g))return a.j?16>a.v.length&&a.v.push(b):(a.j=1,a.H=g,tb(a,d,e),pb(a,
g,!0),wb(a)),!0}if(a.f){if(void 0==c)return!0;b=Object.keys(a.f);for(e=0;e<b.length;e++)if(f=b[e],0<=a.f[f].keys.indexOf(g))return pb(a,f,c),a.f[f].state=c?1:0,!0}return!1}function ub(a){1==a.j?(a.j++,pb(a,a.H,!1),a.H="",tb(a,-1,-1),wb(a)):(a.j=0,a.v.length&&xb(a,a.v.shift()))}lb.prototype.$=function(){this.a=0;this.M=this.S=-1};
function T(a,b,c,d,e){var g=-1,f=-1,m=!1,h=-1,q=-1;if(c<U){d=d||window.event;d.targetTouches&&d.targetTouches.length?(h=d.targetTouches[0].clientX,q=d.targetTouches[0].clientY,m=1<d.targetTouches.length):(h=d.clientX,q=d.clientY);var k=d.target.getBoundingClientRect();h-=k.left;q-=k.top;h=e.pc/b.offsetWidth*h|0;q=e.rc/b.offsetHeight*q|0;var p=h-e.xc;var l=q-e.yc;var r=k=!1;var w=h>=e.Db&&h<e.Db+e.oc&&q>=e.Eb&&q<e.Eb+e.qc;if(0<=p&&p<e.qa&&0<=l+e.xb||w)if(m||a.N||d.preventDefault(),0<=p&&p<e.qa&&0<=
l&&l<e.Aa){r=!0;d=e.qa/e.ra|0;var x=e.Aa/e.Ea|0,z=p/d|0,t=l/x|0;!a.U||t&1||(p-=d>>1,z=p/d|0,z==e.ra-1&&(p=-1));x=t*x+(e.xb>>1);p-=z*d+(e.nc>>1);l-=x;0<=p&&p<e.vb&&0<=l&&l<e.wb&&(g=z,f=t,k=!0)}}p=p||0;l=l||0;d=b.offsetWidth;b=b.offsetHeight;if(c==yb||c==U)for(z=0;z<a.L.length;z++)t=a.L[z],c==U?t.yb(t.id,!1):(x=l/(b/t.Td|0)|0,(p/(d/t.Sd|0)|0)==t.he&&x==t.ie&&t.yb(t.id,!0));if(!m)if(c==yb)e.ua=h,e.Ga=q,r?(tb(a,g,f),k&&a.h&&S(a.time,a.T,a.h,!0)):w&&a.o.Y();else if(c==zb)0<=e.ua&&0<=e.Ga&&a.V?tb(a,g,f):
a.J&&a.J(g,f);else if(c==U){if(c=a.h)c=a.time,g=a.T,c=c.a&&0<g&&g<=c.b.length?0<=c.b[g-1].X:!1;c||tb(a,-1,-1);e.ua=e.Ga=-1}else E(a,"unrecognized action: "+c)}function Fb(a){var b=a.l?a.s:a.c;b&&R(a.o)&&(a.m(524288,'setFocus("%s")\n',b.id||b.nodeName),b.focus(),b.scrollIntoView())}function tb(a,b,c){if(b!=a.M||c!=a.S)a.M=b,a.S=c,a.O&&a.O(b,c)}var yb=1,zb=2,U=3,mb="surface",Db=3,Bb=170,Eb=512,Cb=3584,V={},Ab=(V[L.fc]=2,V[L.Jb]=8,V[L.Fb]=32,V[L.Sa]=128,V[L.Ka]=Eb,V[L.Wb]=1024,V[L.cc]=2048,V);
B.Input=lb;
function Gb(a,b,c){O.call(this,a,b,c,["color","backgroundColor"]);a=this.w[Hb];if(!a)throw Error("LED "+this.g.w[Hb]+" binding for '"+Hb+"' missing");b=document.createElement("canvas");if(!b||!b.getContext)throw a.innerHTML="LED device requires HTML5 canvas support",Error("LED device requires HTML5 canvas support");this.type=Ka(H(this,"type",Ib,Jb),Kb,Lb);this.f=Mb[this.type][0];this.l=Mb[this.type][1];this.width=H(this,"width",this.f,void 0);this.height=H(this,"height",this.l,void 0);this.h=H(this,
"cols",1,void 0);this.J=this.h+H(this,"colsExtra",0,void 0);this.T=H(this,"rows",1,void 0);this.K=this.T+H(this,"rowsExtra",0,void 0);this.V=this.width*this.h;this.O=this.height*this.T;this.j=Nb("black",0);this.c=Ob(this.g.color)||this.j;this.ma=Nb(this.c,1,.25);this.la=Nb(this.c,1,2);this.i=Ob(this.g.backgroundColor);this.va=H(this,"fixed",!1);this.va||(b.style.width="100%",b.style.height="auto");this.ka=H(this,"hexagonal",!1);this.wa=H(this,"highlight",!0);this.N=H(this,"persistent",this.type<Lb);
b.setAttribute("width",this.V.toString());b.setAttribute("height",this.O.toString());b.style.backgroundColor=this.j;a.appendChild(b);this.ca=b.getContext("2d");if(this.s=document.createElement("canvas"))this.s.width=this.U=this.f*this.h,this.s.height=this.v=this.l*this.T,this.a=this.s.getContext("2d");this.xa=(this.K+1)*this.J*4;this.b=Array(this.xa);this.ya=this.h<this.J?4*(this.J-this.h):0;this.L=this.M=!1;this.H=this.S=0;this.ga=-1;var d=this;this.time=Q(this,"Time");Pb(this.time,function(e){Qb(d,
!1,e)});Rb(d)}v(Gb,O);function Rb(a){for(var b=a.b,c=0;c<b.length;c+=4){var d=a,e=b,g=c;e[g]=d.type<Lb?Sb:" ";e[g+1]=d.c==d.j?null:d.c;e[g+2]=0;e[g+3]=Tb}a.L=a.M=!0;Qb(a,!0)}function Ub(a){a.i?(a.a.fillStyle=a.i,a.a.fillRect(0,0,a.U,a.v)):a.a.clearRect(0,0,a.U,a.v)}
function Qb(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(a.L||b){if(a.type<Lb){var d=0;if(!a.N||b)Ub(a);else if(a.H){d=a.h-a.H;var e=a.f*d;a.a.drawImage(a.s,a.f*a.H,0,e,a.v,0,0,e,a.v)}for(var g=e=0;g<a.K;g++){for(var f=0;f<a.h;f++){var m=a.b[e],h=a.b[e+1]||a.j,q=a.wa&&e==a.ga;if(a.b[e+3]&Tb||q||b){if(f>=d)a:{var k=a,p=m;m=h;var l=f;h=g;var r=q;l=void 0===l?0:l;h=void 0===h?0:h;r=void 0===r?!1:r;var w=0;if(k.ka&&!(h&1)&&(w=k.f>>1,l==k.h-1))break a;if(m&&m!=k.c){r=r?Nb(m,1,2):m;var x=Nb(m,1,.25)}else r=
r?k.la:k.c,x=k.ma;m=!1;p=p?r:x;r==k.j&&(p=k.i,m=!0);r=l*k.f+w;x=h*k.l;k.N&&(l=l*k.f+w,h*=k.l,k.i?(k.a.fillStyle=k.i,k.a.fillRect(l,h,k.f,k.l)):k.a.clearRect(l,h,k.f,k.l));k.a.fillStyle=p;h=Vb[k.type];3==h.length?(k.a.beginPath(),k.a.arc(r+h[0],x+h[1],h[2],0,2*Math.PI),m?(k.a.globalCompositeOperation="destination-out",k.a.fill(),k.a.globalCompositeOperation="source-over"):k.a.fill()):k.a.fillRect(r+h[0],x+h[1],h[2],h[3])}a.b[e+3]=q?a.b[e+3]|Tb:a.b[e+3]&~Tb}e+=4}e+=a.ya}a.H=0}else{b="";for(d=0;d<a.b.length;d+=
4)b+=a.b[d]||" ",a.b[d+3]&Wb&&(b+=".");Ub(a);for(g=e=d=0;d<b.length;d++){h=b[d];"."==h&&e&&e--;f=a;q=e;k=g;q=void 0===q?0:q;k=void 0===k?0:k;if(h=Xb[h])for(m=0;m<h.length;m++)if(l=f,w=Yb[h[m]]){p=(void 0===q?0:q)*l.f;r=(void 0===k?0:k)*l.l;l.a.fillStyle=l.c;l.a.beginPath();if(3==w.length)l.a.arc(p+w[0],r+w[1],w[2],0,2*Math.PI);else for(x=0;x<w.length;x+=2)x?l.a.lineTo(p+w[x],r+w[x+1]):l.a.moveTo(p+w[x],r+w[x+1]);l.a.closePath();l.a.fill()}if(++e==a.h&&(e=0,++g==a.K))break}}a.ca.globalCompositeOperation=
a.i&&a.c!=a.j?"source-over":"copy";a.ca.drawImage(a.s,0,0,a.U,a.v,0,0,a.V,a.O);a.L=!1;a.ga=-1}else a.N||a.M||(!c||!a.S||c-a.S>=(1E3/60|0))&&Rb(a);a.M=!1;c&&(a.S=c)}function Ob(a){return(a=a||void 0)&&cb[a]||a}
function Nb(a,b,c){b=void 0===b?1:b;c=void 0===c?1:c;if(a){var d=[];a=cb[a]||a;var e=16;var g=a.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);g||(e=10,g=a.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+|)\)$/i));if(g){var f;for(f=1;f<g.length;f++)d[f-1]=Number.parseInt(g[f],e);d.length=f-1;e=!0}else e=!1;if(e){a="rgba(";for(e=0;3>e;e++)g=Math.round(d[e]*c),g=0>g?0:255<g?255:g,a+=g+",";a+=(e<d.length?d[e]:b)+")"}}return a}
Gb.prototype.ha=function(a){var b=a.shift(),c=a.shift();a=a.shift();if(b==this.c&&c==this.i&&a&&a.length==this.b.length){this.b=a;for(b=0;b<=this.b.length-4;b+=4)this.b[b+1]==this.j&&(this.b[b+1]=null);Qb(this,!0);return!0}return!1};Gb.prototype.ia=function(a){this.b&&(a.push(this.c),a.push(this.i),a.push(this.b))};
var Kb=0,Ib=1,Lb=3,Jb={small:Kb,round:Ib,square:2,digit:Lb},Hb="container",Sb=0,Wb=1,Tb=128,Zb={},Vb=(Zb[Kb]=[4,4,4],Zb[Ib]=[16,16,14],Zb[2]=[2,2,28,28],Zb),Mb=[[8,8],[32,32],[32,32],[96,128]],Yb={A:[30,8,79,8,67,19,37,19],B:[83,10,77,52,67,46,70,22],C:[77,59,71,100,61,89,64,64],D:[28,91,58,91,69,104,15,104],E:[18,59,28,64,25,88,12,100],F:[24,10,34,21,31,47,18,52],G:[24,56,34,50,60,50,71,56,61,61,33,61],P:[80,102,8]},Xb={" ":[],0:"ABCDEF".split(""),1:["B","C"],2:["A","B","D","E","G"],3:["A","B","C",
"D","G"],4:["B","C","F","G"],5:["A","C","D","F","G"],6:"ACDEFG".split(""),7:["A","B","C"],8:"ABCDEFG".split(""),9:"ABCDFG".split(""),A:"ABCEFG".split(""),B:["C","D","E","F","G"],C:["A","D","E","F"],D:["B","C","D","E","G"],E:["A","D","E","F","G"],F:["A","E","F","G"],"-":["G"],".":["P"]};B.LED=Gb;
function W(a,b,c){O.call(this,a,b,c);var d=this;this.U=this.g.touchType;this.O=this.g.diagnostics;this.l=this.g.monitorWidth||640;this.i=this.g.monitorHeight||480;this.c=this.w[X.gb];if(!this.c)throw Error("unable to find binding: "+X.gb);this.a=this.fa(X.Ib)||this.c;b=this.w[X.ob];if(!b){b=document.createElement("canvas");if(a=Ha(this,X.ob))this.w[a]=b,b.setAttribute("id",a);b.setAttribute("class","pcjs-surface");b.setAttribute("width",this.g.monitorWidth);b.setAttribute("height",this.g.monitorHeight);
b.style.backgroundColor=this.g.monitorColor||"black";this.c.appendChild(b)}this.f=b;this.j=a=b.getContext("2d");K("MSIE")&&(this.c.onresize=function(f,m,h,q){return function(){m.style.height=(f.clientWidth*q/h|0)+"px"}}(this.c,b,this.g.monitorWidth,this.g.monitorHeight),this.c.onresize());(c=+(this.g.aspect||Ma().aspect))&&.3<=c&&3.33>=c&&(Qa(function(f,m,h){return function(){m.style.height=(f.clientWidth/h|0)+"px"}}(this.c,b,c)),window.onresize());this.v=this.s=this.o.sa=!1;if(c=this.w[X.Wa])if(b=
G(this.a,"requestFullscreen")){this.a.Ba=this.a[b];this.v=!0;this.s=document.fullscreenEnabled||K("Edge/");if(b=G(document,"on","fullscreenchange")){var e=G(document,"fullscreenElement");document.addEventListener(b,function(){$b(d,null!=document[e])},!1)}(b=G(document,"on","fullscreenerror"))&&document.addEventListener(b,function(){$b(d)},!1)}else this.m("Full-screen API not available\n"),c.parentNode.removeChild(c);if(this.U||this.O||this.v&&!K("iOS")){var g=document.createElement("textarea");if(b=
Ha(this,X.Yb))this.w[b]=g,g.setAttribute("id",b);g.setAttribute("class","pcjs-overlay");K("iOS")&&(Ea(g),g.style.fontSize="16px");this.c.appendChild(g)}(this.h=Q(this,"Input",!1))&&nb(this.h,g||this.c,this.fa(this.g.focusBinding,!0));Ma();if(this.b=this.g.monitorRotate)this.b=this.b%360,0<this.b&&(this.b-=360),-90!=this.b?(this.m("unsupported monitor rotation: %d\n",this.b),this.b=0):(a.translate(0,this.i),a.rotate(this.b*Math.PI/180),a.scale(this.i/this.l,this.l/this.i))}v(W,O);
W.prototype.ea=function(a,b){var c=this;switch(a){case X.Wa:b.onclick=function(){c.o.sa=1>=window.outerHeight-window.innerHeight;c.o.sa||c.Ba()}}O.prototype.ea.call(this,a,b)};function ac(a){a.j&&(a.j.fillStyle="black",a.j.fillRect(0,0,a.f.width,a.f.height))}
W.prototype.Ba=function(){var a=!1;if(this.a&&this.a.Ba){a="100%";if(screen&&screen.width&&screen.height){var b=screen.width/screen.height,c=this.l/this.i;b>c&&(a=Math.round(c/b*100)+"%")}this.s?(this.f.style.width=a,this.f.style.height="auto",this.f.style.display="block",this.f.style.margin="auto"):(this.a.style.width=a,this.a.style.height="auto");this.H=this.a.style.backgroundColor;this.a.style.backgroundColor="black";this.a.Ba();this.h&&(a=this.h,a.l=!0,Fb(a));a=!0}return a};
function $b(a,b){a.o.sa=!0;b||(a.a&&(a.s?a.f.style.width=a.f.style.height="":a.a.style.width=a.a.style.height="",a.H&&(a.a.style.backgroundColor=a.H)),a.o.sa=!1);a.h&&!b&&(a=a.h,a.l=!1,Fb(a))}W.prototype.Y=function(a){a?this.S=!1:ac(this)};W.prototype.$=function(){ac(this)};var X={Ib:"container",ob:"surface",gb:"monitor",Yb:"overlay",Wa:"fullScreen"};B.Monitor=W;
function bc(a,b,c){O.call(this,a,b,c);this.la=H(this,"cyclesMinimum",1E5,void 0);this.ya=H(this,"cyclesMaximum",1E9,void 0);this.ma=Ka(H(this,"cyclesPerSecond",1E6,void 0),this.la,this.ya);this.M=1E3/60;this.ac=H(this,"updatesPerSecond",2,void 0)||2;this.$b=1E3/this.ac;this.xa=0;this.bc=H(this,"timeLock",!0);this.ga=this.J=0;this.ca=this.j=1;this.wa=this.s=this.ma/1E4/100;this.T=[];this.v=[];this.b=[];this.U=[];this.va=this.a=this.S=this.l=!1;this.H=this.f=0;a=G(window,"requestAnimationFrame");if(!a){a=
"setTimeout";var d=this.M}this.hb=window[a].bind(window,this.uc.bind(this),d);this.Xb=window[G(window,"cancelAnimationFrame")||"clearTimeout"].bind(window);this.O=this.N=this.h=this.c=this.ka=0;cc(this)||dc(this,this.ca)}v(bc,O);function Pb(a,b){a.T.push(b)}n=bc.prototype;
n.ea=function(a,b){var c=this;switch(a){case ec:b.onclick=function(){fc(c)&&(c.a?gc(c):c.start())};break;case hc:b.onclick=function(){dc(c,c.j<<1);ic(c,jc(c.s))};break;case kc:b.onclick=function(){fc(c)&&(c.a?E(c,"already running"):c.f?gc(c):lc(c,void 0))};break;case mc:b.addEventListener("mousedown",function(){c.l=!0}),b.addEventListener("mouseup",function(){cc(c);c.l=!1}),b.addEventListener("mousemove",function(){c.l&&cc(c)}),b.addEventListener("change",function(){c.l=!0;cc(c);c.l=!1})}O.prototype.ea.call(this,
a,b)};function sb(a,b,c){var d=void 0===d?-1:d;var e=a.b.length+1;a.b.push({id:b,mc:c,Da:d,X:-1});0<=d&&S(a,e,d);return e}
function nc(a,b,c,d){var e=0,g=a.s,f=1E6*g;b&&c&&(g=b/(10*c)/100,a.m(65536,"calcSpeed(%d cycles, %5.3fms): %5.3fMhz\n",b,c,g),d>a.M&&(1<a.j&&(a.j>>=1,a.m(8388608,"warning: frame time (%5.3fms) exceeded maximum (%5.3fms), target multiplier now %d\n",d,a.M,a.j)),e=d));a.J=g;a.ga=g/a.wa;b=a.ga/a.j;a.ka=f/b/60+1E-8;a.m(65536,"nCyclesDepositPerFrame(%5.3f) = nCyclesPerSecond(%d) / nDivisor(%5.3f) / nFramesPerSecond(%d)\n",a.ka,f,b,60);return e}
function oc(a,b){a.N=a.h=b;if(!a.v.length)return a.h=0,a.N;for(var c=0;0<a.h;){if(c<a.v.length){var d=a.v[c++];b=d.vc.call(d,b)||1}else c=b=0;a.h-=b}return a.N-a.h}function pc(a,b){b=void 0===b?a.N-a.h:b;if(!a.a){if(a.c)for(var c=0;c<a.v.length;c++){var d=a.v[c];d.wc.call(d)}a.c=b}a.c-=b;1>a.c&&(a.S=!0);a.O+=b;a.N=a.h=0;a.a||(a.O=0);return b}
function qc(a,b){b=void 0===b?0:b;if(b){var c=b;a.c+=b}else for(c=a.c,1>c&&(c=a.c+=a.ka),0>c&&(a.m(8388608,"warning: cycle count dropped below zero: %f\n",c),c=a.c=0),c|=0,b=a.b.length;0<b;b--){var d=a.b[b-1];!(0>d.X)&&c>d.X&&(c=d.X)}return c}function jc(a){1<=a?a=a.toFixed(2)+"Mhz":(a=Math.round(1E6*a),a=999>=a?a+"Hz":Math.ceil(a/1E3)+"Khz");return a}function fc(a){return a.va?!0:(E(a,"not powered"),!1)}
function rc(a,b){if(1<=b)for(var c=a.b.length;0<c;c--){var d=a.b[c-1];0>d.X||(d.X-=b,0>=d.X&&(d.X=-1,d.mc(),0<=d.Da&&S(a,c,d.Da)))}}n.Y=function(a){this.va=a;void 0===this.ba&&(this.ba=Q(this,"Debugger",!1))};
n.uc=function(a){a=void 0===a?Date.now():a;this.H=0;if(this.a){var b=Date.now();if(this.K){var c=b-this.L-this.M;c>this.M&&(this.i+=c,this.m(8388608,"warning: browser throttling detected, compensating by %5.3fms\n",c))}this.L=b;this.i||(this.i=b);this.V=0;try{this.S=!1;do rc(this,pc(this,oc(this,qc(this))));while(this.a&&!this.S)}catch(d){E(this,d.message),gc(this)}this.K=Date.now();this.V&&(this.i+=this.V,this.L+=this.V);this.L+=nc(this,this.O,this.K-this.i,this.K-this.L);this.K-this.xa>=this.$b&&
this.update();for(b=0;b<this.T.length;b++)this.T[b](a);this.H=this.hb()}};function dc(a,b){if(void 0!==b){if(1>b||!a.l&&0<a.J&&a.J<.9*a.s)b=a.ca;a.j=b;b=a.wa*a.j;a.s!=b&&(a.s=b,ic(a,jc(a.s)))}a.i=a.K=0;a.c=a.O=0;nc(a);for(b=a.b.length;0<b;b--){var c=a.b[b-1];0<=c.Da&&S(a,b,c.Da,!0)}}function cc(a){var b=a.w[mc];return b?(dc(a,Math.floor((b.value-b.min)/(b.max-b.min)*(a.ya-a.la)+a.la)/a.ma|0),!0):!1}
function S(a,b,c,d){0<b&&b<=a.b.length&&(b=a.b[b-1],d||0>b.X)&&(c=Math.ceil(a.ma*(a.bc?a.ca:a.ga)/1E3*(void 0===c?1E3:c)),a.a&&(c+=pc(a)),b.X=c)}n.start=function(){if(this.a||this.f)return!1;this.a=!0;this.i=this.K=0;this.update(!0);this.H=this.hb();return!0};function lc(a,b){b=void 0===b?1:b;a.a||(b&&!a.f&&(a.f=b),a.f&&(a.f--,rc(a,pc(a,oc(a,qc(a,1)))),a.update(!1),a.f&&setTimeout(function(){lc(a,0)},0)))}
function gc(a){a.a?(a.a=!1,pc(a),a.H&&(a.Xb(a.H),a.H=0),a.update(!0)):a.f&&(a.f=0,a.update(!0))}n.update=function(a){a&&E(this,this.a?"started with "+jc(this.s)+" target":"stopped");Xa(this,ec,this.a?"Halt":"Run");Xa(this,kc,this.f?"Stop":"Step");this.l||(this.m(65536,"getSpeedCurrent(%5.3fhz)\n",1E6*this.J),ic(this,this.a&&this.J?jc(this.J):"Stopped"));for(a=0;a<this.U.length;a++);this.xa=Date.now();this.S=!0};function ic(a,b){Xa(a,sc,b);Xa(a,hc,b)}
var ec="run",hc="setSpeed",sc="speed",kc="step",mc="throttle";B.Time=bc;
function tc(a,b,c){O.call(this,a,b,c);this.type="static"==this.g.type?uc:vc;this.i=this.g.addrWidth||16;this.f=Math.pow(2,this.i);this.a=this.g.blockSize||(16<this.i?4096:1024);this.a>this.f&&(this.a=this.f);this.s=this.f/this.a|0;this.c=Math.log2(this.a)|0;this.j=(1<<this.c)-1;this.l=this.g.dataWidth||8;this.b=Array(this.s);this.h=0;a=new Y(a,b+"[NONE]",{size:this.a,bus:this.I});for(b=0;b<this.f;b+=this.a)wc(this,b,this.a,Z.NONE,a);a=this.h;this.h+=this.type;a&&this.h||(this.ja=this.ta)}v(tc,O);
function wc(a,b,c,d,e){for(var g=b>>>a.c;0<c&&g<a.b.length;){var f=g*a.a,m=a.a-(b-f);m>c&&(m=c);var h=a.b[g];if(b!=f||m!=a.a||h&&h.type!=Z.NONE)break;var q=h=void 0,k=b,p=a.i,l=16;p=void 0===p?0:p;h=void 0===h?0:h;var r="",w="",x=-1;l||(l=a.v||10);p&&(x=Math.ceil(p/Math.log2(l)));if(void 0==q)switch(l){case 8:q="0o";break;case 16:q="0x";break;case 10:w=".";default:q=""}isNaN(k)||"number"!=typeof k?(k=void 0,q=w=""):(0>k&&-1<k&&(k=-1),p&&(0>k&&(k+=Math.pow(2,p)),k>=Math.pow(2,p)&&(x=Math.ceil(Math.log(k)/
Math.log(l)))));for(p=h||-1;x--;){p||(r=","+r,p=h);if(void 0==k){if(r="?"+r,0>x)break}else{var z=k%l;k=Math.trunc(k/l);z+=0<=z&&9>=z?48:55;r=String.fromCharCode(z)+r;if(!k&&0>x)break}p--}h=a.I+"["+(q+r+w)+"]";b=e?e.size==a.a?e:new Y(a.u,h,{type:d,za:b,size:m,bus:a.I}):new Y(a.u,h,{type:d,za:b,size:m,bus:a.I});a.b[g]=b;b=f+a.a;c-=m;g++}}n=tc.prototype;n.Y=function(){void 0===this.ba&&(this.ba=Q(this,"Debugger",!1))};n.$=function(){};n.zb=function(a){return a&&this.ha(a)?!0:!1};n.Ab=function(a){this.ia(a)};
n.ha=function(a){for(var b=0;b<this.b.length;b++){var c=this.b[b];if((this.type==vc||c.type&Z.na)&&c.ha){var d=a.shift();if(!c.ha(d))return!1}}return!0};n.ia=function(a){for(var b=0;b<this.b.length;b++){var c=this.b[b];if((this.type==vc||c.type&Z.na)&&c.ia){var d=[];c.ia(d);a.push(d)}}};n.ta=function(a,b){this.b[a>>>this.c].ja(a&this.j,b)};var uc=0,vc=1;B.Bus=tc;
function Y(a,b,c){O.call(this,a,b,c);this.za=this.g.addr;this.size=this.g.size;this.type=this.g.type||Z.NONE;this.b=(a=this.g.bus)?eb(this,a):Q(this,a="Bus");if(!this.b)throw Error(this.R("unable to find bus '%s'",a));this.l=this.b.l;this.f=this.j=!1;this.values=this.c=null;a=this.ta;if(this.b.type==uc){a=this.Cb;if(b=8==this.l)b=eb(this,this.u),b=!1!==(b&&b.g&&b.g.ArrayBuffer||this.g.ArrayBuffer);b&&(this.j=!0)}switch(this.type){case Z.NONE:this.ja=this.Bb;break;case Z.mb:this.ja=this.Bb;break;case Z.na:this.ja=
a}xc(this,this.g.values);yc(this)}v(Y,O);function xc(a,b){"string"==typeof b?(hb(a,!1),La(b,function(c,d,e,g){if(4==e)if(!g&&d){try{var f=JSON.parse(d);xc(a,f.values)}catch(m){a.m("error (%s) parsing resource: %s\n",m.message,c)}hb(a,!0)}else a.m("error (%d) loading resource: %s\n",g,c)})):a.g.values=b}
function yc(a,b){if(a.type>Z.NONE&&(a.j?(a.c=new ArrayBuffer(a.size),new DataView(a.c,0,a.size),a.values=new Uint8Array(a.c,0,a.size),new Uint16Array(a.c,0,a.size>>1),new Int32Array(a.c,0,a.size>>2)):a.values=Array(a.size).fill(0),b))for(var c=0;c<b.length;c++)a.values[c]=b[c]}n=Y.prototype;
n.$=function(){if(this.g.values)a:{var a=this.b,b=this.za,c=this.size,d=this.g.values,e=0,g=b&a.j;b>>>=a.c;c>d.length&&(c=d.length);for(;0<c&&b<a.b.length;){var f=a.b[b++];if(!f)break a;for(;0<c&&g<f.size;)f.ta(g++,d[e++]),c--;g=0}}else this.type&Z.na&&this.values&&this.values.fill(0)};n.Bb=function(){};n.ta=function(a,b){this.values[a]=b};n.Cb=function(a,b){this.values[a]=b;this.f=!0;this.ja=this.ta};
n.ha=function(a){var b=a.shift();if(this.I==b){this.f=a.shift();a.shift();if(a=a.shift()){var c=this.size;c=void 0===c?0:c;if(a.length!=c){b=0;c=c?Array(c):[];for(var d=0;d<a.length-1;)for(var e=a[d++],g=a[d++];e--;)c[b++]=g;a=c}yc(this,a)}return!0}return!1};n.ia=function(a){a.push(this.I);a.push(this.f);a.push(!1);a.push(this.values?ua(this.values):this.values)};var Z={NONE:1,mb:2,na:4,Ld:14,Od:12};B.Memory=Y;
function zc(a,b,c){c.type=Z.NONE;Y.call(this,a,b,c);wc(this.b,this.g.addr,this.g.size,Z.na);ib(this,this.$.bind(this))}v(zc,Y);B.RAM=zc;
function Ac(a,b,c){c.type=Z.mb;Y.call(this,a,b,c);wc(this.b,this.g.addr,this.g.size,this.g.type,this);ib(this,this.$.bind(this));this.aa=this.ba=void 0;if(B.LED&&this.w[Bc]){var d=this;this.h=Math.pow(2,Math.ceil(Math.log2(this.values.length)/2));this.i=this.values.length/this.h|0;this.a=new Gb(a,b+"LEDs",{"class":"LED",bindings:{container:Ha(this,Bc)},type:Ib,cols:this.h,rows:this.i,color:H(this,"colorROM","green"),backgroundColor:H(this,"backgroundColorROM","black"),persistent:!0}),Rb(this.a);this.s=
new lb(a,b+"Input",{"class":"Input",location:[0,0,this.a.V,this.a.O,this.h,this.i],bindings:{surface:Ha(this,Bc)}});this.v=Ia(this)||"";ob(this.s,function(e,g){if(d.aa){var f=d.v;0<=e&&0<=g&&(e=g*d.h+e,f=d.aa.de(d.za+e,d.values[e]));Xa(d,Ja,f)}})}}v(Ac,Y);
Ac.prototype.ha=function(a){var b=!0,c=a.shift();if(c&&this.a){var d=c.length;this.a.b.length==d?(this.a.b=c,Qb(this.a,!0)):(this.m("inconsistent saved LED state (%d), unable to load\n",d),b=!1)}a.length&&(d=(a=a.shift())&&a.length||-1,this.values.length==d?this.values=a:(this.m("inconsistent saved ROM state (%d), unable to load\n",d),b=!1));return b};Ac.prototype.Y=function(){void 0===this.aa&&(this.aa=Q(this,"CPU"));void 0===this.ba&&(this.ba=Q(this,"Debugger",!1))};
Ac.prototype.ia=function(a){this.a&&(a.push(this.a.b),a.push(this.values))};var Bc="array",Ja="cellDesc";B.ROM=Ac;function Cc(a,b,c){c["class"]="CPU";O.call(this,a,b,c);this.ba=void 0;this.tc=0;this.time=Q(this,"Time");this.time.v.push(this);this.time.U.push(this);this.b=this.a=0}v(Cc,O);Cc.prototype.abort=function(a){E(this,a.message);gc(this.time)};Cc.prototype.vc=function(a){this.b=this.a=void 0===a?0:a;return this.b-this.a};Cc.prototype.wc=function(){this.b-=this.a;this.a=0};
function Dc(a,b,c){Cc.call(this,a,b,c)}v(Dc,Cc);B.CPUx86=Dc;function Ec(a,b,c){W.call(this,a,b,c);this.M=this.g.bufferAddr;this.J=this.g.interruptRate;this.K=this.g.refreshRate||60;this.N=eb(this,this.g.bus);this.aa=Q(this,"CPU");this.time=Q(this,"Time");this.L=sb(this.time,this.I,this.V.bind(this));this.time.U.push(this);S(this.time,this.L,1E3/Math.max(this.K,this.J))}v(Ec,W);
Ec.prototype.V=function(a){if(!a){if(this.S&&this.T){a=this.N;var b=this.M,c=this.T,d=b>>>a.c;for(b=a.a-(b&a.j);0<c&&d<a.b.length;){var e=a.b[d];e.f&&(e.f=!1,e.b.type==uc&&(e.ja=e.Cb));c-=b;b=a.a;d++}}S(this.time,this.L,1E3/Math.max(this.K,this.J))}};B.PCx86Video=Ec;
function Fc(a,b,c){O.call(this,a,a);var d=this;this.c=!1;this.j=c;this.b="";this.i=this.h=!1;hb(this,!1);this.W=0;b=b.trim();"{"==b[0]?Gc(this,b):(this.b=b,La(this.b,function(e,g,f,m){4==f&&(!m&&g?(Gc(d,g),Hc(d)):d.m("error (%d) loading configuration: %s\n",m,e))}));window.addEventListener("load",function(){d.i=!0;Hc(d)});window.addEventListener(K("iOS")?"pagehide":K("Opera")?"unload":"beforeunload",function(){Ic(d)});window.addEventListener("pageshow",function(){d.c||d.Y(!0)})}v(Fc,O);
Fc.prototype.ea=function(a,b){var c=this;switch(a){case Jc:b.onclick=function(){c.Y()};break;case Kc:b.onclick=function(){c.$()}}O.prototype.ea.call(this,a,b)};
function Hc(a){var b=!0;if(a.h&&a.i){for(var c in a.a){var d=void 0,e=a.a[c];try{d=e["class"],B[d]?"Machine"==d?(a.m("PCjs %s v%3.2f\n%s\n",e.name,3,Lc),a.b&&a.m("Configuration: %s\n",a.b)):new B[d](a.u,c,e):a.m('unrecognized %s device "%s"\n',d,c)}catch(f){e.optional||(a.m('error initializing %s device "%s": %s\n',d,c,f.message),b=!1),kb(a,c)}}if(a.f){var g=Oa(a);gb(a,function(f){return f.zb&&!f.zb(g)?(f.m('unable to restore state for device "%s"\n',f.I),!1):!0})}hb(a,!0);ib(a,a.Y.bind(a,b))||a.m("machine %s not ready to power, waiting for device(s)\n",
a.u)}}function Gc(a,b){try{a.a=JSON.parse(b);var c=a.a[a.u];if(!c){c=a.a[wa(a.b)];if(!c)throw Error("configuration missing machine ID");a.a[a.u]=c}fb(a,c,["autoSave","autoStart"]);a.f=!1!==a.g.autoSave;a.l=!1!==a.g.autoStart;if(a.j){var d=eval("("+a.j+")"),e;for(e in d)a.g[e]=d[e]}a.h=!0}catch(g){c=g.message,(d=c.match(/position ([0-9]+)/))&&(c+=" ('"+b.substr(+d[1],40).replace(/\s+/g," ")+"...')"),E(a,"machine '"+a.u+"' initialization error: "+c)}}
Fc.prototype.Y=function(a){a=void 0===a?!this.c:a;if(R(this)){var b=this;a&&E(this,"power on");gb(this,function(c){c.Y&&c!=b&&("CPU"!=c.g["class"]||b.l||R(b)?c.Y(a):c.time.update(!0));return!0});(this.c=a)||E(this,"power off")}};Fc.prototype.$=function(){if(R(this)){var a=this;gb(this,function(b){b.$&&b!=a&&b.$();return!0});E(this,"reset")}};function Ic(a){if(a.f){var b=[];gb(a,function(c){c.Ab&&c.Ab(b);return!0});Wa(a,b)}a.Y(!1)}var Jc="power",Kc="reset",Lc="Copyright \u00a9 2012-2020 Jeff Parsons <Jeff@pcjs.org>";
window.PCx86v3=function(a,b,c){var d=new Fc(a,b,c);window.command=function(e){return Pa(d,e)};return d};B.Machine=Fc;})()

//# sourceMappingURL=pcx86v3.js.map
